{% extends "base_faceslide.html" %}


{% block title %}

{{v_id}}

{% endblock %}

{% block css %}
  
  <style type="text/css">

        body{
          background-color:#355664;
        }
        audio{
          width: 100%;
        }

        /*audio:hover {
          width: 520px !important;
        }*/

  </style>

{% endblock %}

{% block content %}


        <div class="container">

            <div class="row main" id='player'>


                <div class="tile is-ancestor">
                  <div class="tile is-4 is-vertical is-parent">
                    <div class="tile is-child notification is-danger">
                      
                      <div class=" pre-scrollable" id="fix">
                            <p id="text" class="scroll" style="width:100%"></p><br>
                      </div>

                    </div>

                    <div class="tile is-child ">
                        <div id="footnotediv"></div>
                        <video muted>
                            <source src="/static/video1/face_34.mp4" type="video/mp4">
                        </video>
                    </div>
                  </div>

                  <div class="tile is-parent">
                    <div class="tile is-child notification is-primary">
                        <figure class="image is-4by3">
                            <img src="/static/video1/slide_200.png">
                        </figure>
                    </div>
                    </div>
                  </div>

                 <div class="col-md-6 col-md-offset-3">

                    <audio id='mp3player' controls ontimeupdate="magic(this.currentTime)">
                        <source src="{{audio_file}}" type="audio/ogg">
                    </audio>

                </div>
            </div>

        </div>


        

{% endblock %}

{% block script %}
  
  <script src="http://popcornjs.org/code/dist/popcorn-complete.min.js"></script>
    
  <script>

    var data_json = {{data_json|safe}};
    var _image = $('img')[0];
    var _video = $('video')[0];

    function magic(time){
            //console.log("Hello");
            n = Math.floor(time)+1;
            console.log(n);
            for (i = 0; i < data_json.length; i++) { 
                console.log(n);
                if (data_json[i][0] == n){
                    //console.log(n)
                    if (data_json[i][1] == 'slide'){
                        var img_src=data_json[i][2]
                      $('#movie_img').attr('src',img_src);
                    }
                    if (data_json[i][1] == 'face'){
                      var face_src=data_json[i][2]
                      $('#movie_video').attr('src',face_src);
                      playVid()
                    }
                    if (data_json[i][1] == 'text'){
                      var text_src=data_json[i][2]
                      
                      $('#text').append( text_src );
                      $('#text').append( "<br>" );
                      $('#text').scrollTo( '100%' );
                    }
                }
            }
    }


    
  </script>  
  

{% endblock %}
 